(function(c){c("a[data-reveal-id]").on("click",function(a){a.preventDefault();a=c(this).attr("data-reveal-id");c("#"+a).reveal(c(this).data())});c.fn.reveal=function(a){a=c.extend({},{animation:"fadeAndPop",animationspeed:300,closeonbackgroundclick:!0,dismissmodalclass:"close-reveal-modal"},a);return this.each(function(){function g(){e=!1}var b=c(this),f=parseInt(b.css("top")),h=b.height()+f,e=!1,d=c(".reveal-modal-bg");0==d.length&&(d=c('<div class="reveal-modal-bg" />').insertAfter(b));b.bind("reveal:open",
function(){d.unbind("click.modalEvent");c("."+a.dismissmodalclass).unbind("click.modalEvent");e||(e=!0,"fadeAndPop"==a.animation&&(b.css({top:c(document).scrollTop()-h,visibility:"visible"}),d.fadeIn(a.animationspeed/2),b.delay(a.animationspeed/2).animate({top:c(document).scrollTop()+f+"px"},a.animationspeed,g())),"fade"==a.animation&&(b.css({opacity:0,visibility:"visible",top:c(document).scrollTop()+f}),d.fadeIn(a.animationspeed/2),b.delay(a.animationspeed/2).animate({opacity:1},a.animationspeed,
g())),"none"==a.animation&&(b.css({visibility:"visible",top:c(document).scrollTop()+f}),d.css({display:"block"}),e=!1));b.unbind("reveal:open")});b.bind("reveal:close",function(){e||(e=!0,"fadeAndPop"==a.animation&&(d.delay(a.animationspeed).fadeOut(a.animationspeed),b.animate({top:c(document).scrollTop()-h+"px",opacity:0},a.animationspeed/2,function(){b.css({top:f,opacity:1,visibility:"hidden"});e=!1})),"fade"==a.animation&&(d.delay(a.animationspeed).fadeOut(a.animationspeed),b.animate({opacity:0},
a.animationspeed,function(){b.css({opacity:1,visibility:"hidden",top:f});e=!1})),"none"==a.animation&&(b.css({visibility:"hidden",top:f}),d.css({display:"none"})));b.unbind("reveal:close")});b.trigger("reveal:open");c("."+a.dismissmodalclass).bind("click.modalEvent",function(){b.trigger("reveal:close")});a.closeonbackgroundclick&&(d.css({cursor:"pointer"}),d.bind("click.modalEvent",function(){b.trigger("reveal:close")}));c("body").keyup(function(a){27===a.which&&b.trigger("reveal:close")})})}})(jQuery);